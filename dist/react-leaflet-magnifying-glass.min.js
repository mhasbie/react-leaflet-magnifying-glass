!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("leaflet"),require("react-leaflet")):"function"==typeof define&&define.amd?define(["leaflet","react-leaflet"],e):"object"==typeof exports?exports.ReactLeafletMagnifyingGlass=e(require("leaflet"),require("react-leaflet")):t.ReactLeafletMagnifyingGlass=e(t.L,t.ReactLeaflet)}(this,function(t,e){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return t[i].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(2),a=i(n);e.default=a.default},function(t,e){"use strict";L.Control.MagnifyingGlass=L.Control.extend({_magnifyingGlass:!1,options:{position:"topleft",title:"Toggle Magnifying Glass",forceSeparateButton:!1},initialize:function(t,e){this._magnifyingGlass=t;for(var o in e)e.hasOwnProperty(o)&&this.options.hasOwnProperty(o)&&(this.options[o]=e[o])},onAdd:function(t){var e,o="leaflet-control-magnifying-glass";return e=t.zoomControl&&!this.options.forceSeparateButton?t.zoomControl._container:L.DomUtil.create("div","leaflet-bar"),this._createButton(this.options.title,o,e,this._clicked,t,this._magnifyingGlass),e},_createButton:function(t,e,o,i,n,a){var s=L.DomUtil.create("a",e,o);return s.href="#",s.title=t,L.DomEvent.addListener(s,"click",L.DomEvent.stopPropagation).addListener(s,"click",L.DomEvent.preventDefault).addListener(s,"click",function(){i(n,a)},n),s},_clicked:function(t,e){e&&(t.hasLayer(e)?t.removeLayer(e):e.addTo(t))}}),L.control.magnifyingglass=function(t,e){return new L.Control.MagnifyingGlass(t,e)}},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),l=o(5),p=o(4),f=i(p);o(3),o(1);var u=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return s(e,t),r(e,[{key:"createLeafletElement",value:function(t){var e=t.position,o=void 0===e?"topleft":e,i=t.forceSeparateButton,n=void 0!==i&&i,a=t.radius,s=void 0===a?100:a,r=t.zoomOffset,l=void 0===r?3:r,p=t.fixedZoom,u=void 0===p?-1:p,c={position:o,forceSeparateButton:n},h="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",d={attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'},m=f.default.magnifyingGlass({radius:s,zoomOffset:l,fixedZoom:u,layers:[f.default.tileLayer(h,d)]});return f.default.control.magnifyingglass(m,c)}},{key:"componentDidMount",value:function(){var t=this.context.map;console.log(this.context),this.leafletElement.addTo(t)}}]),e}(l.MapControl);e.default=u},function(t,e){"use strict";L.MagnifyingGlass=L.Layer.extend({options:{radius:100,zoomOffset:3,layers:[],fixedPosition:!1,latLng:[0,0],fixedZoom:-1},initialize:function(t){L.Util.setOptions(this,t),this._fixedZoom=this.options.fixedZoom!=-1,this._mainMap=null,this._glassMap=null},getMap:function(){return this._glassMap},_createMiniMap:function(t){return new L.Map(t,{layers:this.options.layers,zoom:this._getZoom(),maxZoom:this._mainMap.getMaxZoom(),minZoom:this._mainMap.getMinZoom(),crs:this._mainMap.options.crs,fadeAnimation:!1,attributionControl:!1,zoomControl:!1,boxZoom:!1,touchZoom:!1,scrollWheelZoom:!1,doubleClickZoom:!1,dragging:!1,keyboard:!1})},_getZoom:function(){return this._fixedZoom?this.options.fixedZoom:this._mainMap.getZoom()+this.options.zoomOffset},_updateZoom:function(){this._glassMap.setZoom(this._getZoom())},setRadius:function(t){this.options.radius=t,this._wrapperElt&&(this._wrapperElt.style.width=2*this.options.radius+"px",this._wrapperElt.style.height=2*this.options.radius+"px")},setLatLng:function(t){this.options.latLng=t,this._update(t)},_updateFromMouse:function(t){this._update(t.latlng,t.layerPoint)},_updateFixed:function(){this._update(this.options.latLng)},_update:function(t,e){this._glassMap.setView(t,this._getZoom(),{pan:{animate:!1}}),e=e||this._mainMap.latLngToLayerPoint(t),this._wrapperElt.style.left=e.x-this.options.radius+"px",this._wrapperElt.style.top=e.y-this.options.radius+"px"},onAdd:function(t){this._mainMap=t,this._wrapperElt=L.DomUtil.create("div","leaflet-magnifying-glass");var e=L.DomUtil.create("div","",this._wrapperElt);L.Browser.webkit&&L.DomUtil.addClass(e,"leaflet-magnifying-glass-webkit"),this._glassMap=this._createMiniMap(e),L.DomEvent.addListener(this._wrapperElt,"click",this._fireClick,this);var o=this.options;return this.setRadius(o.radius),this.setLatLng(o.latLng),this._glassMap.whenReady(function(){o.fixedPosition?(this._mainMap.on("zoomend",this._updateFixed,this),L.DomUtil.addClass(this._wrapperElt,"leaflet-zoom-hide")):(this._mainMap.on("mousemove",this._updateFromMouse,this),this._fixedZoom||this._mainMap.on("zoomend",this._updateZoom,this))},this),t.getPanes().popupPane.appendChild(this._wrapperElt),this._glassMap.invalidateSize(),this},_fireClick:function(t){this.fire("click",t),L.DomEvent.stopPropagation(t)},onRemove:function(t){t.off("viewreset",this._updateFixed,this),t.off("mousemove",this._updateFromMouse,this),t.off("zoomend",this._updateZoom,this);for(var e=0,o=this.options.layers.length;e<o;e++)this._glassMap.removeLayer(this.options.layers[e]);return this._glassMap.remove(),L.DomEvent.removeListener(this._wrapperElt,"click",this._fireClick),t.getPanes().popupPane.removeChild(this._wrapperElt),this._mainMap=null,this}}),L.magnifyingGlass=function(t){return new L.MagnifyingGlass(t)}},function(e,o){e.exports=t},function(t,o){t.exports=e}])});